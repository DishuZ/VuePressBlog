<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>反射 | Zenbu Space</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/blog/assets/img/favicon.ico">
    <meta name="description" content="属于Zenbu的个人博客，持续记录对技术的讲解和梳理学习的知识">
    
    <link rel="preload" href="/blog/assets/css/0.styles.c2eac126.css" as="style"><link rel="preload" href="/blog/assets/js/app.5cf145b8.js" as="script"><link rel="preload" href="/blog/assets/js/2.a59f6ee1.js" as="script"><link rel="preload" href="/blog/assets/js/42.ea0a803d.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.ebdacc7e.js"><link rel="prefetch" href="/blog/assets/js/11.5b92bcb6.js"><link rel="prefetch" href="/blog/assets/js/12.3775846d.js"><link rel="prefetch" href="/blog/assets/js/13.0d25ebcd.js"><link rel="prefetch" href="/blog/assets/js/14.ae1aacae.js"><link rel="prefetch" href="/blog/assets/js/15.96f13d95.js"><link rel="prefetch" href="/blog/assets/js/16.9d928f8a.js"><link rel="prefetch" href="/blog/assets/js/17.53415660.js"><link rel="prefetch" href="/blog/assets/js/18.a4bc894e.js"><link rel="prefetch" href="/blog/assets/js/19.8d81ed15.js"><link rel="prefetch" href="/blog/assets/js/20.26f2bfb0.js"><link rel="prefetch" href="/blog/assets/js/21.4502dce7.js"><link rel="prefetch" href="/blog/assets/js/22.8f5a25ef.js"><link rel="prefetch" href="/blog/assets/js/23.7c5c9567.js"><link rel="prefetch" href="/blog/assets/js/24.ca2c3768.js"><link rel="prefetch" href="/blog/assets/js/25.6d8bbb42.js"><link rel="prefetch" href="/blog/assets/js/26.83039fbb.js"><link rel="prefetch" href="/blog/assets/js/27.adf92751.js"><link rel="prefetch" href="/blog/assets/js/28.f2a024b0.js"><link rel="prefetch" href="/blog/assets/js/29.b3926ca2.js"><link rel="prefetch" href="/blog/assets/js/3.1fcfa166.js"><link rel="prefetch" href="/blog/assets/js/30.40311e72.js"><link rel="prefetch" href="/blog/assets/js/31.c606d6bc.js"><link rel="prefetch" href="/blog/assets/js/32.1a2b64e2.js"><link rel="prefetch" href="/blog/assets/js/33.c9197e3a.js"><link rel="prefetch" href="/blog/assets/js/34.cdcb1225.js"><link rel="prefetch" href="/blog/assets/js/35.dcf7bf36.js"><link rel="prefetch" href="/blog/assets/js/36.ee20ca71.js"><link rel="prefetch" href="/blog/assets/js/37.adc3728f.js"><link rel="prefetch" href="/blog/assets/js/38.b1a60eb1.js"><link rel="prefetch" href="/blog/assets/js/39.254937f1.js"><link rel="prefetch" href="/blog/assets/js/4.c20dd059.js"><link rel="prefetch" href="/blog/assets/js/40.78db51cb.js"><link rel="prefetch" href="/blog/assets/js/41.d9ca5bc7.js"><link rel="prefetch" href="/blog/assets/js/43.73b011a9.js"><link rel="prefetch" href="/blog/assets/js/44.bb4d0a8e.js"><link rel="prefetch" href="/blog/assets/js/45.5b12916f.js"><link rel="prefetch" href="/blog/assets/js/46.da1586e9.js"><link rel="prefetch" href="/blog/assets/js/47.d9436699.js"><link rel="prefetch" href="/blog/assets/js/48.0e0875ef.js"><link rel="prefetch" href="/blog/assets/js/49.f37da9a2.js"><link rel="prefetch" href="/blog/assets/js/5.923729f1.js"><link rel="prefetch" href="/blog/assets/js/50.e6807bb8.js"><link rel="prefetch" href="/blog/assets/js/51.279356c7.js"><link rel="prefetch" href="/blog/assets/js/52.42f15bb0.js"><link rel="prefetch" href="/blog/assets/js/53.c2ee570b.js"><link rel="prefetch" href="/blog/assets/js/54.b05f4789.js"><link rel="prefetch" href="/blog/assets/js/55.0dd0fd5d.js"><link rel="prefetch" href="/blog/assets/js/56.b21f6abc.js"><link rel="prefetch" href="/blog/assets/js/57.7a560703.js"><link rel="prefetch" href="/blog/assets/js/58.729a904b.js"><link rel="prefetch" href="/blog/assets/js/59.9fb40538.js"><link rel="prefetch" href="/blog/assets/js/6.fae665ef.js"><link rel="prefetch" href="/blog/assets/js/60.27a63915.js"><link rel="prefetch" href="/blog/assets/js/61.e309bf9f.js"><link rel="prefetch" href="/blog/assets/js/62.efb2b7de.js"><link rel="prefetch" href="/blog/assets/js/63.6a6d79d0.js"><link rel="prefetch" href="/blog/assets/js/64.12006acb.js"><link rel="prefetch" href="/blog/assets/js/65.8a1adaa8.js"><link rel="prefetch" href="/blog/assets/js/66.3c866e11.js"><link rel="prefetch" href="/blog/assets/js/7.39c6f4a0.js"><link rel="prefetch" href="/blog/assets/js/8.8113b657.js"><link rel="prefetch" href="/blog/assets/js/9.138ddabb.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.c2eac126.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container tech-page"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/assets/img/logo.png" alt="Zenbu Space" class="logo"> <span class="site-name can-hide">Zenbu Space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  🏠Home
</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/blog/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">
  ☕Java
</a></div><div class="nav-item"><a href="/blog/algorithm/leetcode100top.html" class="nav-link">
  💫算法
</a></div><div class="nav-item"><a href="/blog/mark_md.html" class="nav-link">
  Markdown
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Liberary Menu" class="dropdown-title"><span class="title">Liberary</span> <span class="arrow down"></span></button> <button type="button" aria-label="Liberary Menu" class="mobile-dropdown-title"><span class="title">Liberary</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/proletarian/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/blog/resource.html" class="nav-link">
  资源
</a></li></ul></div></div> <a href="https://github.com/DishuZ/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  🏠Home
</a></div><div class="nav-item"><a href="/blog/about.html" class="nav-link">
  About
</a></div><div class="nav-item"><a href="/blog/cpp/" class="nav-link">
  C++
</a></div><div class="nav-item"><a href="/blog/java/" class="nav-link router-link-active">
  ☕Java
</a></div><div class="nav-item"><a href="/blog/algorithm/leetcode100top.html" class="nav-link">
  💫算法
</a></div><div class="nav-item"><a href="/blog/mark_md.html" class="nav-link">
  Markdown
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Liberary Menu" class="dropdown-title"><span class="title">Liberary</span> <span class="arrow down"></span></button> <button type="button" aria-label="Liberary Menu" class="mobile-dropdown-title"><span class="title">Liberary</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/proletarian/" class="nav-link">
  阅读
</a></li><li class="dropdown-item"><!----> <a href="/blog/resource.html" class="nav-link">
  资源
</a></li></ul></div></div> <a href="https://github.com/DishuZ/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java技术文档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/" aria-current="page" class="sidebar-link">🎮 基础知识</a></li><li><a href="/blog/java/basic/java_basic_x_annotation.html" class="sidebar-link">🎯 注解</a></li><li><a href="/blog/java/basic/java_basic_x_proxy.html" class="sidebar-link">👫 代理模式</a></li><li><a href="/blog/java/java_use.html" class="sidebar-link">⚙ 即用工具箱</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Java解析</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/java/java_collections.html" class="sidebar-link">📦 Collections</a></li><li><a href="/blog/java/jvm/java_jvm_classload.html" class="sidebar-link">类加载过程详解</a></li><li><a href="/blog/java/jvm/java_jvm_jmm.html" class="sidebar-link">JVM 内存模型</a></li><li><a href="/blog/java/jvm/java_jvm_struct.html" class="sidebar-link">JVM 内存结构</a></li><li><a href="/blog/java/java_qa.html" class="sidebar-link">💬 面经</a></li><li><a href="/blog/java/java_heima_mianshi.html" class="sidebar-link">Java面试总结</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="反射"><a href="#反射" class="header-anchor">#</a> 反射</h1> <p></p><div class="table-of-contents-default"><div class="toc-container-header">文章目录</div><ul><li><a href="#反射基础">反射基础</a><ul><li><a href="#概念">概念</a></li><li><a href="#使用">使用</a><ul><li><a href="#class-类">Class 类</a><ul><li><a href="#「-class-文件」-「-class-类」-「-class-对象」">「.class文件」&amp;「Class类」&amp;「Class对象」</a></li><li><a href="#「-class-类」的方法">「Class类」的方法</a></li><li><a href="#「-class-对象」的获取">「Class对象」的获取</a></li></ul></li><li><a href="#java-lang-reflect-类库">java.lang.reflect 类库</a><ul><li><a href="#constructor-类">Constructor 类</a></li><li><a href="#field-类">Field 类</a></li><li><a href="#method-类">Method 类</a></li></ul></li><li><a href="#反射机制的执行流程">反射机制的执行流程</a></li></ul></li></ul></li></ul></div><p></p> <h2 id="反射基础"><a href="#反射基础" class="header-anchor">#</a> 反射基础</h2> <h3 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h3> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <p>在Java中，<strong><code>Class</code> 类</strong> 与 <strong><code>java.lang.reflect</code> 类库</strong> 一起对反射技术进行了全力的支持。</p> <h4 id="class-类"><a href="#class-类" class="header-anchor">#</a> <code>Class</code> 类</h4> <p><code>Class</code> 是一个实实在在的类，存在于JDK的 <code>java.lang</code> 包中。「<code>Class</code>类」的实例表示Java应用运行时的类或接口，换句话说，在应用运行时，每一个Java类都在JVM中表现为一个对应的 「<code>Class</code>对象」。</p> <p>所以，需要注意：</p> <ul><li><code>Class</code> 是一个类，与 <code>class</code> 关键字是不一样的</li> <li>每个通过关键字 <code>class</code> 标识的类，在JVM内存中都有且只有一个与之对应的「<code>Class</code>对象」来描述其类型信息。无论创建多少个实例对象，其依据的都是用一个「<code>Class</code>对象」</li> <li>Class类的对象作用是运行时提供或获得某个对象的类型信息，这点对于反射技术很重要(关于反射稍后分析)</li> <li>「<code>.class</code>文件」是「<code>Class</code>对象」在磁盘上的表示，而「<code>Class</code>对象」则是「<code>.class</code>文件」在内存中的运行时表示</li></ul> <h5 id="「-class文件」-「class类」-「class对象」"><a href="#「-class文件」-「class类」-「class对象」" class="header-anchor">#</a> 「<code>.class</code>文件」&amp;「<code>Class</code>类」&amp;「<code>Class</code>对象」</h5> <h5 id="「class类」的方法"><a href="#「class类」的方法" class="header-anchor">#</a> 「<code>Class</code>类」的方法</h5> <table><thead><tr><th>方法名</th> <th>说明</th></tr></thead> <tbody><tr><td><code>static .. forName()</code></td> <td></td></tr> <tr><td><code>getClass()</code></td> <td>获取Class对象的一个引用，返回表示该对象的实际类型的Class引用</td></tr> <tr><td><code>getName()</code></td> <td>获取全限定的类名(包括包名)，即类的完整名字</td></tr> <tr><td><code>isInterface()</code></td> <td>判断Class对象是否是表示一个接口</td></tr> <tr><td><code>newInstance()</code></td> <td>返回一个Oject对象，是实现“虚拟构造器”的一种途径。使用该方法创建的类，必须带有无参的构造器。</td></tr> <tr><td><code>getFields()</code></td> <td>获得某个类的所有的公共（public）的字段，包括继承自父类的所有公共字段。 类似的还有 <code>getMethods</code> 和 <code>getConstructors</code>。</td></tr></tbody></table> <h5 id="「class对象」的获取"><a href="#「class对象」的获取" class="header-anchor">#</a> 「<code>Class</code>对象」的获取</h5> <p>在类加载的时候，JVM会根据「<code>.class</code>文件」的内容，在JVM的内存中创建一个对应的「<code>Class</code>对象」，这个「<code>Class</code>对象」是该类的运行时表示。它包含了该类的所有信息，比如类名、父类、实现的接口、字段、方法等。</p> <p>反射机制是通过获取和操作这些「<code>Class</code>对象」来完成的，从而实现了对Java类的动态访问和操作。</p> <p>所以，<strong>反射的第一步</strong> 是获取到这些「<code>Class</code>对象」，获取「<code>Class</code>对象」的方式的有四种：</p> <ol><li>知道具体类的情况下可以使用 <code>类名.class</code></li> <li>通过 <code>Class.forName(全限定类名)</code> 传入类的全路径获取</li> <li>通过对象实例 <code>实例.getClass()</code> 获取</li> <li>通过类加载器 <code>xxxClassLoader.loadClass()</code> 传入类路径获取</li></ol> <h4 id="java-lang-reflect-类库"><a href="#java-lang-reflect-类库" class="header-anchor">#</a> <code>java.lang.reflect</code> 类库</h4> <p>在 <code>java.lang.reflect</code> 反射包中，我们常用的类主要有：</p> <ul><li><strong><code>Constructor</code> 类</strong> —— 表示的是 Class 对象所表示的<strong>类的构造方法</strong>，利用它可以在运行时动态创建对象</li> <li><strong><code>Field</code></strong> —— 表示 Class 对象所表示的<strong>类的成员变量</strong>，通过它可以在运行时动态修改成员变量的属性值（包含 <code>private</code> 方法）</li> <li><strong><code>Method</code></strong> —— 表示 Class 对象所表示的<strong>类的成员方法</strong>，通过它可以动态调用对象的方法（包含 <code>private</code> 方法），</li></ul> <h5 id="constructor-类"><a href="#constructor-类" class="header-anchor">#</a> <code>Constructor</code> 类</h5> <p><code>Constructor</code> 类反映的是「<code>Class</code>对象」所表示的类的构造方法。</p> <h5 id="field-类"><a href="#field-类" class="header-anchor">#</a> <code>Field</code> 类</h5> <p><code>Field</code> 提供有关类或接口的单个字段的信息，以及对它的动态访问权限。反射的字段可能是一个类（静态）字段或实例字段。</p> <h5 id="method-类"><a href="#method-类" class="header-anchor">#</a> <code>Method</code> 类</h5> <h4 id="反射机制的执行流程"><a href="#反射机制的执行流程" class="header-anchor">#</a> 反射机制的执行流程</h4> <img src="https://raw.githubusercontent.com/DishuZ/PicGo/main/all/20240419152550.png" alt="20240419152550" class="zoom"></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/blog/assets/js/app.5cf145b8.js" defer></script><script src="/blog/assets/js/2.a59f6ee1.js" defer></script><script src="/blog/assets/js/42.ea0a803d.js" defer></script>
  </body>
</html>
